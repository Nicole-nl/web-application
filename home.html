<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script>
      // for home page
      function addItem2(ele) {
        let item = {};
        item.name =
          ele.parentElement.parentElement.querySelector(
            ".product_name"
          ).innerHTML;
        item.price =
          ele.parentElement.querySelector(".product_price").innerHTML;
        item.image =
          ele.parentElement.parentElement.querySelector(".product_image").src;
        let shoppingCart = JSON.parse(localStorage.getItem("shoppingCart"));
        if (shoppingCart == null) shoppingCart = [];
        shoppingCart.push(item);
        localStorage.setItem("shoppingCart", JSON.stringify(shoppingCart));
        displayShoppingCart();
      }
      function displayShoppingCart() {
        console.log("999");
        let content = "";
        total_amt = 0;
        let shoppingCart = JSON.parse(localStorage.getItem("shoppingCart"));
        console.log("999", shoppingCart);
        if (shoppingCart == null) shoppingCart = [];
        shoppingCart.forEach((item) => {
          total_amt += parseInt(item.price);
          content += `
          <div class="cart_item">
            <img
              class="cart_item_img"
              src="${item.image}"
              alt="product image"
            />
            <div class="cart_item_title">
              ${item.name}
              </div>
            <div>$${item.price}</div>
            <button class="btn btn-secondary btn-remove" onclick="removeItem(${item.index})">Remove</button>
          </div>
          `;
        });
        document.getElementById("cart").innerHTML = content;
        document.getElementById("total_amt").innerHTML = "$" + total_amt;
        document.querySelector(".badge").innerHTML = shoppingCart.length;
        console.log("999", total_amt);
      }
      function removeItem(index) {
        let shoppingCart = JSON.parse(localStorage.getItem("shoppingCart"));
        if (shoppingCart == null) shoppingCart = [];

        shoppingCart.splice(index, 1);
        localStorage.setItem("shoppingCart", JSON.stringify(shoppingCart));
        displayShoppingCart();
      }
    </script>
    <link rel="stylesheet" href="main.css" />
    <title>Melbourne Watch Gallery</title>
  </head>
  <body onload="displayShoppingCart()">
    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="home.html"
                >Melbourne Watch Gallery</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="login.html">Product Management</a>
            </li>
          </ul>

          <form class="d-flex">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <div class="header">
      <img class="logo" src="images/logo.jpg" alt="" />
      <h1>Melbourne Watch Gallery</h1>
    </div>
    <div class="main_container">
      <div class="products_container">
        <div class="tile_container">
          <a class="tile_top" href="product1.html">
            <h1 class="product_name">Apple Watch Ultra 49mm Titanium</h1>
            <img
              class="product_image"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/608360-Product-0-I-637982294245758291_3dc34603-f064-422a-ac8e-0282529388c8_934x.jpg?v=1662707363"
              alt=""
            />
          </a>
          <div class="tile_bottom">
            <h2>$<span class="product_price">1299</span></h2>
            <button class="btn btn-success" onclick="addItem2(this)">
              Add to cart
            </button>
          </div>
        </div>

        <div class="tile_container">
          <a class="tile_top" href="product1.html">
            <h1 class="product_name">Fitbit Versa 3 (Thistle/Soft Gold)</h1>
            <img
              class="product_image"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/517817-Product-0-I-637576432289255724_934x.jpg?v=1622010495"
              alt=""
            />
          </a>
          <div class="tile_bottom">
            <h2>$<span class="product_price">299</span></h2>
            <button class="btn btn-success" onclick="addItem2(this)">
              Add to cart
            </button>
          </div>
        </div>

        <div class="tile_container">
          <a class="tile_top" href="product1.html">
            <h1 class="product_name">
              Fitbit Versa 2 Smart Fitness Watch (Petal/Copper Rose)
            </h1>
            <img
              class="product_image"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/398459-Product-0-I_b73a28b3-cdd6-4832-a2d0-b0e3ad93a9a3_934x.jpg?v=1572323646"
              alt=""
            />
          </a>
          <div class="tile_bottom">
            <h2>$<span class="product_price">199</span></h2>
            <button class="btn btn-success" onclick="addItem2(this)">
              Add to cart
            </button>
          </div>
        </div>

        <div class="tile_container">
          <a class="tile_top" href="product1.html">
            <h1 class="product_name">Garmin Venu SQ Smart Watch</h1>
            <img
              class="product_image"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/535486-Product-0-I-637684279085741086_934x.jpg?v=1632795178"
              alt=""
            />
          </a>
          <div class="tile_bottom">
            <h2>$<span class="product_price">149</span></h2>
            <button class="btn btn-success" onclick="addItem2(this)">
              Add to cart
            </button>
          </div>
        </div>
      </div>
      <div class="shopping_cart_container">
        <h2 class="shoppingcart_label">Shopping cart</h2>
        <div id="cart">
          <div class="cart_item">
            <img
              class="cart_item_img"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/608360-Product-0-I-637982294245758291_3dc34603-f064-422a-ac8e-0282529388c8_934x.jpg?v=1662707363"
              alt=""
            />
            <div>Apple Watch Ultra 49mm Titanium</div>
            <div>$1299</div>
            <button class="btn btn-secondary btn-remove">Remove</button>
          </div>

          <div class="cart_item">
            <img
              class="cart_item_img"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/398459-Product-0-I_b73a28b3-cdd6-4832-a2d0-b0e3ad93a9a3_934x.jpg?v=1572323646"
              alt=""
            />
            <div>Fitbit Versa 2 Smart Fitness Watch (Petal/Copper Rose)</div>
            <div>$199</div>
            <button class="btn btn-secondary btn-remove">Remove</button>
          </div>

          <div class="cart_item">
            <img
              class="cart_item_img"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/535486-Product-0-I-637684279085741086_934x.jpg?v=16327951783"
              alt=""
            />
            <div>Garmin Venu SQ Smart Watch</div>
            <div>$149</div>
            <button class="btn btn-secondary btn-remove">Remove</button>
          </div>
        </div>
        <div class="cart_item">
          <h2 class="total_label">Total</h2>
          <h2 id="total_amt" class="total_amt">$0</h2>
          <button class="btn btn-success btn-checkout">
            Check out <span class="badge badge-secondary">3</span>
          </button>
        </div>
      </div>
    </div>
  </body>
</html>
